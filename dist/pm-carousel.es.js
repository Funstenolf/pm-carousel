var t=Object.assign;const e="data-pm-carousel",s=`${e}-paging`,i=`${e}-wrapper`,n=`${e}-overflow`,o=`${e}-item`,h=`${e}-prev`,a=`${e}-next`,r=`${e}-playstop`;var l={extend:function t(){const e={};let s=!1,i=0;const n=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(s=arguments[0],i++);const o=function(i){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&(s&&"[object Object]"===Object.prototype.toString.call(i[n])?e[n]=t(!0,e[n],i[n]):e[n]=i[n])};for(;i<n;i++){o(arguments[i])}return e},returnJson:function(t){try{return JSON.parse(t)}catch(e){return{}}}};const c={playstop:function(){this.nodes.playstop&&(this.nodes.playstop.hidden=!this.config.autoplay)},wrappers:function(){const t=this.config.noStartSpace?0:this.config.spaceAround;this.nodes.overflow.style.transform=`translateX(${-100*this.active+t}%)`,this.config.noStartSpace?this.nodes.overflow.style.paddingRight=this.config.spaceAround+"%":(this.nodes.overflow.style.paddingRight=t+"%",this.nodes.overflow.style.paddingLeft=t+"%"),this.nodes.overflow.style.transition="transform .5s ease-in-out",this.nodes.overflow.style.display="flex",this.nodes.wrapper.style.overflow="hidden",this.el.classList.add("is-active")},slides:function(){const t=[];for(this.nodes.items.forEach(((t,s)=>{t.setAttribute("tabindex","-1"),t.setAttribute(e+"-item",s),t.style.flex=`1 0 ${100/this.config.group}%`,t.style.overflow="hidden"}));this.nodes.items.length>0;)t.push(this.nodes.items.splice(0,this.config.group));this.nodes.items=t,this.slideLength=this.nodes.items.length},paging:function(){if(!this.nodes.paging)return;let t,e;const s=document.createDocumentFragment();this.nodes.paging.innerHTML="",this.nodes.pages=[],this.nodes.items.forEach(((i,n)=>{e=this.pagingBtnString,t=document.createElement("div"),t.innerHTML=e.replace("{nbr}",++n),this.nodes.pages.push(t.firstElementChild),s.appendChild(t.firstElementChild)})),this.nodes.paging.append(s),this.nodes.paging.hidden=!1}};function d(t=[]){t.forEach((t=>c[t].call(this)))}function p(){this.nodes={paging:this.el.querySelector(`[${s}]`),wrapper:this.el.querySelector(`[${i}]`),overflow:this.el.querySelector(`[${n}]`),items:[].slice.call(this.el.querySelectorAll(`[${o}]`)),prev:this.el.querySelector(`[${h}]`),next:this.el.querySelector(`[${a}]`),playstop:this.el.querySelector(`[${r}]`)},this.active=0,this._interval=null,this.autoplayStatus="stop",this._slideWidth=0,this._touchstartX=0,this._touchmoveX=0,this._moveX=0,d.call(this,["slides","wrappers","playstop","paging"]),this.el.addEventListener("click",this.onClick),this.el.addEventListener("keydown",this.onKeydown),this.nodes.wrapper.addEventListener("touchstart",this.onTouchStart),this.nodes.wrapper.addEventListener("touchmove",this.onTouchMove),this.nodes.wrapper.addEventListener("touchend",this.onTouchEnd),this.config.autoplay>1&&this.nodes.playstop?(this.config.loop=!0,this.autoplayStatus="play",this.play(),this.el.addEventListener("mouseenter",this.pause.bind(this)),this.el.addEventListener("mouseleave",this.play.bind(this))):this.changeActive(this.active)}function u(){this._slideWidth=this.activeSlides[0].offsetWidth*this.config.group,this._distance=this.active*this._slideWidth,this.active===this.slideLength-1&&(this._distance=this.nodes.overflow.scrollWidth-this._slideWidth,this.config.spaceAround&&(this._distance-=parseInt(window.getComputedStyle(this.nodes.overflow).getPropertyValue("padding-right"),10))),this.nodes.overflow.style.transform=`translateX(${-this._distance}px`}function v(){if(!this.nodes.prev)return;const t=this.prevString;this.nodes.prev.innerHTML=t.replace("{text}",0===this.active?this.texts.prevFirst:this.texts.prev),this.config.loop?this.nodes.prev.hidden=!1:this.nodes.prev.hidden=0===this.active}function g(){if(!this.nodes.next)return;const t=this.nextString;this.nodes.next.innerHTML=t.replace("{text}",this.active===this.slideLength-1?this.texts.nextLast:this.texts.next),this.config.loop?this.nodes.next.hidden=!1:this.nodes.next.hidden=this.active===this.slideLength-1}function f(){this.activeSlides=[],this.nodes.paging&&this.nodes.pages.forEach(((t,e)=>{let s=t;const i=t.querySelector("button");i&&(s=i),e===this.active?(s.setAttribute("aria-current","true"),t.classList.add("is-active")):(s.removeAttribute("aria-current"),t.classList.remove("is-active"))})),this.nodes.items.forEach(((t,e)=>{t.forEach(((t,s)=>{e===this.active?(0===s&&"play"!==this.autoplayStatus&&t.focus({preventScroll:!0}),t.setAttribute("aria-hidden","false"),this.activeSlides.push(t)):t.setAttribute("aria-hidden","true")}))})),u.call(this),v.call(this),g.call(this)}function y(t){let s=this.active;const i=t.target,n=i.closest(`[${e}-playstop]`),o=i.closest(`[${e}-prev]`),h=i.closest(`[${e}-next]`),a=i.closest(`[${e}-paging]`);if(n)this.toggleAutoplay();else{if(o)s--;else if(h)s++;else{if(!a||!a.querySelector("button"))return;{const t=i.closest(`[${e}-paging] li`);s=this.nodes.pages.indexOf(t)}}this.stop(),this.changeActive(s)}}function m(t){let e=!1;switch(console.log(t.key),t.key){case"ArrowUp":case"ArrowLeft":e=!0,this.changeActive(this.active-1);break;case"ArrowDown":case"ArrowRight":e=!0,this.changeActive(this.active+1);break;case"Home":e=!0,this.changeActive(0);break;case"End":e=!0,this.changeActive(this.slideLength-1)}e&&t.preventDefault()}var w={onTouchStart:function(t){this.nodes.overflow.style.transition="none",this._touchstartX=Math.round(t.touches[0].pageX),this._slideWidth=this.nodes.wrapper.offsetWidth},onTouchMove:function(t){this._touchmoveX=Math.round(t.touches[0].pageX),this._moveX=this._touchstartX-this._touchmoveX,this.nodes.overflow.style.transform=`translateX(${-this._distance-this._moveX/2}px)`},onTouchEnd:function(t){let e=this.active;if(this.nodes.overflow.style.transition="transform .5s ease-in-out",this._moveX>this._slideWidth/3)e++;else{if(!(this._moveX<-this._slideWidth/3))return void(this.nodes.overflow.style.transform=`translateX(${-this._distance}px)`);e--}this.changeActive(e)}};function S(){const e=this.settings.responsive.slice().reverse().find((t=>window.matchMedia(`(min-width: ${t.minWidth})`).matches));return e?t(t({},this.settings.default),e):this.settings.default}let x,b=!1;function L(){b||(b=!0,x=setTimeout((()=>{this.config=S.call(this),this.config.disable?this.disable():this.reinit(),b=!1,clearTimeout(x)}),500))}const A={default:{loop:!0,group:1,spaceAround:0,noStartSpace:!1,autoplay:0}};class E{constructor(i,n){this.el=i;const o=l.returnJson(this.el.getAttribute(e));if(this.settings=l.extend(!0,A,n,o),this.config=this.settings.default,this.settings.responsive&&(this.settings.responsive.sort(((t,e)=>parseInt(t.minWidth,10)-parseInt(e.minWidth,10))),this.config=S.call(this),this.settings.responsive.forEach((t=>{window.matchMedia(`(min-width: ${t.minWidth})`).addEventListener("change",L.bind(this))}))),this.onClick=y.bind(this),this.onTouchstart=w.onTouchStart.bind(this),this.onTouchMove=w.onTouchMove.bind(this),this.onTouchEnd=w.onTouchEnd.bind(this),this.onKeydown=m.bind(this),this.nodes={paging:this.el.querySelector(`[${s}]`),prev:this.el.querySelector(`[${h}]`),next:this.el.querySelector(`[${a}]`),playstop:this.el.querySelector(`[${r}]`)},this.nodes.paging&&(this.pagingBtnString=this.nodes.paging.innerHTML),this.texts={},this.nodes.playstop){this.playstopString=this.nodes.playstop.innerHTML;const e=this.nodes.playstop.getAttribute(r).split("|");this.texts=t(t({},this.texts),{play:e[0],stop:e[1]})}if(this.nodes.prev&&this.nodes.next){this.prevString=this.nodes.prev.innerHTML,this.nextString=this.nodes.next.innerHTML;const e=this.nodes.prev.getAttribute(h).split("|"),s=this.nodes.next.getAttribute(a).split("|");this.texts=t(t({},this.texts),{prev:e[0],prevFirst:e[1],next:s[0],nextLast:s[1]})}this.config.disable||p.call(this)}reinit(){p.call(this)}play(){if(!this.nodes.playstop||"stop"===this.autoplayStatus)return;this.pause(),this.autoplayStatus="play",this.nodes.playstop.classList.add("is-playing");const t=this.playstopString;this.nodes.playstop.innerHTML=t.replace("{text}",this.texts.play);let e=this.active;this._interval=window.setInterval((()=>{e++,e>this.slideLength-1&&(e=0),this.changeActive(e)}),this.config.autoplay)}pause(){window.clearInterval(this._interval)}stop(){if(!this.nodes.playstop)return;this.autoplayStatus="stop",this.nodes.playstop.classList.remove("is-playing");const t=this.playstopString;this.nodes.playstop.innerHTML=t.replace("{text}",this.texts.stop),window.clearInterval(this._interval)}toggleAutoplay(){this.nodes.playstop&&("play"===this.autoplayStatus?this.stop():"stop"===this.autoplayStatus&&(this.autoplayStatus="play",this.play()))}changeActive(t){this.active=t,this.active<0&&(this.active=this.config.loop?this.slideLength-1:0),this.active>this.slideLength-1&&(this.active=this.config.loop?0:this.slideLength-1),f.call(this)}disable(){this.stop(),this.nodes.wrapper.removeEventListener("touchstart",this.onTouchStart),this.nodes.wrapper.removeEventListener("touchmove",this.onTouchMove),this.nodes.wrapper.removeEventListener("touchend",this.onTouchEnd),this.el.removeEventListener("click",this.onClick),this.el.removeEventListener("mouseenter",this.pause),this.el.removeEventListener("mouseleave",this.play),this.nodes.paging.hidden=!0,this.nodes.prev.hidden=!0,this.nodes.next.hidden=!0,this.nodes.playstop.hidden=!0,this.nodes.overflow.removeAttribute("style"),this.nodes.wrapper.removeAttribute("style"),this.nodes.items.forEach((t=>{t.forEach((t=>{t.removeAttribute("tabindex"),t.removeAttribute("aria-hidden"),t.removeAttribute("style")}))})),this.el.classList.remove("is-active")}}const $=(t,s)=>{!t.pmCarousel&&t.hasAttribute(e)&&(t.pmCarousel=new E(t,s))},_=function(t={},s){null!==s&&((s=s||document.querySelectorAll(`[${e}]`)).length?s.forEach((e=>$(e,t))):$(s,t))};window.pmCarousel=_;export default _;
