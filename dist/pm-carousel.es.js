var t=Object.assign;const e="data-pm-carousel";var s={attr:e,attrPaging:`${e}-paging`,attrWrapper:`${e}-wrapper`,attrOverflow:`${e}-overflow`,attrItem:`${e}-item`,attrPrev:`${e}-prev`,attrNext:`${e}-next`,attrPlaystop:`${e}-playstop`,transition:"transform .5s ease-in-out",activeClass:"is-active"};var i={extend:function t(){const e={};let s=!1,i=0;const n=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(s=arguments[0],i++);for(var o=function(i){for(let n in i)Object.prototype.hasOwnProperty.call(i,n)&&(s&&"[object Object]"===Object.prototype.toString.call(i[n])?e[n]=t(!0,e[n],i[n]):e[n]=i[n])};i<n;i++){o(arguments[i])}return e},returnJson:function(t){try{return JSON.parse(t)}catch(e){return{}}}};const n={playstop:function(){this.nodes.playstop.hidden=!this.config.autoplay},wrappers:function(){var t=this.config.noStartSpace?0:this.config.spaceAround;this.nodes.overflow.style.transform=`translateX(${-100*this.active+t}%)`,this.config.noStartSpace?this.nodes.overflow.style.paddingRight=this.config.spaceAround+"%":(this.nodes.overflow.style.paddingRight=t+"%",this.nodes.overflow.style.paddingLeft=t+"%"),this.nodes.overflow.style.transition=s.transition,this.nodes.overflow.style.display="flex",this.nodes.wrapper.style.overflow="hidden",this.el.classList.add(s.activeClass)},slides:function(){const t=[];for(this.nodes.items.forEach(((t,e)=>{t.setAttribute("tabindex","-1"),t.setAttribute(s.attr+"-item",e),t.style.flex=`1 0 ${100/this.config.group}%`,t.style.overflow="hidden"}));this.nodes.items.length>0;)t.push(this.nodes.items.splice(0,this.config.group));this.nodes.items=t,this.slideLength=this.nodes.items.length},paging:function(){let t,e,s;e=document.createDocumentFragment(),this.nodes.paging.innerHTML="",this.nodes.pages=[],this.nodes.items.forEach(((i,n)=>{s=this.pagingBtnString,t=document.createElement("div"),t.innerHTML=s.replace("{nbr}",++n),this.nodes.pages.push(t.firstElementChild),e.appendChild(t.firstElementChild)})),this.nodes.paging.append(e),this.nodes.paging.hidden=!1}};function o(t=[]){t.forEach((t=>n[t].call(this)))}function h(){this.nodes={paging:this.el.querySelector(`[${s.attrPaging}]`),wrapper:this.el.querySelector(`[${s.attrWrapper}]`),overflow:this.el.querySelector(`[${s.attrOverflow}]`),items:[].slice.call(this.el.querySelectorAll(`[${s.attrItem}]`)),prev:this.el.querySelector(`[${s.attrPrev}]`),next:this.el.querySelector(`[${s.attrNext}]`),playstop:this.el.querySelector(`[${s.attrPlaystop}]`)},this.active=0,this._interval=null,this.autoplayStatus="stop",this._slideWidth=0,this._touchstartX=0,this._touchmoveX=0,this._moveX=0,o.call(this,["slides","wrappers","playstop","paging"]),this.el.addEventListener("click",this.onClick),this.nodes.wrapper.addEventListener("touchstart",this.onTouchStart),this.nodes.wrapper.addEventListener("touchmove",this.onTouchMove),this.nodes.wrapper.addEventListener("touchend",this.onTouchEnd),this.config.autoplay?(this.config.loop=!0,this.autoplayStatus="play",this.play(),this.el.addEventListener("mouseenter",this.pause.bind(this)),this.el.addEventListener("mouseleave",this.play.bind(this))):this.changeActive(this.active)}function a(){this._slideWidth=this.activeSlides[0].offsetWidth*this.config.group,this._distance=this.active*this._slideWidth,this.active===this.slideLength-1&&(this._distance=this.nodes.overflow.scrollWidth-this._slideWidth,this.config.spaceAround&&(this._distance-=parseInt(window.getComputedStyle(this.nodes.overflow).getPropertyValue("padding-right"),10))),this.nodes.overflow.style.transform=`translateX(${-this._distance}px`}function r(){if(!this.nodes.prev)return;const t=this.prevString;this.nodes.prev.innerHTML=t.replace("{text}",0===this.active?this.texts.prevFirst:this.texts.prev),this.config.loop?this.nodes.prev.hidden=!1:this.nodes.prev.hidden=0===this.active}function l(){if(!this.nodes.next)return;const t=this.nextString;this.nodes.next.innerHTML=t.replace("{text}",this.active===this.slideLength-1?this.texts.nextLast:this.texts.next),this.config.loop?this.nodes.next.hidden=!1:this.nodes.next.hidden=this.active===this.slideLength-1}function c(){this.activeSlides=[],this.nodes.pages.forEach(((t,e)=>{let i="BUTTON"===t.tagName?t:t.querySelector("button");e===this.active?(i.setAttribute("aria-current","true"),t.classList.add(s.activeClass)):(i.removeAttribute("aria-current"),t.classList.remove(s.activeClass))})),this.nodes.items.forEach(((t,e)=>{t.forEach(((t,s)=>{e===this.active?(0===s&&"play"!==this.autoplayStatus&&t.focus({preventScroll:!0}),t.setAttribute("aria-hidden","false"),this.activeSlides.push(t)):t.setAttribute("aria-hidden","true")}))})),a.call(this),r.call(this),l.call(this)}function d(t){let e=this.active,i=t.target;if(i.closest(`[${s.attr}-playstop]`))this.toggleAutoplay();else{if(i.closest(`[${s.attr}-prev]`))e--;else if(i.closest(`[${s.attr}-next]`))e++;else{if(!i.closest(`[${s.attr}-paging]`))return;{let t=i.closest(`[${s.attr}-paging] li`);e=this.nodes.pages.indexOf(t)}}this.stop(),this.changeActive(e)}}var p={onTouchStart:function(t){this.nodes.overflow.style.transition="none",this._touchstartX=Math.round(t.touches[0].pageX),this._slideWidth=this.nodes.wrapper.offsetWidth},onTouchMove:function(t){this._touchmoveX=Math.round(t.touches[0].pageX),this._moveX=this._touchstartX-this._touchmoveX,this.nodes.overflow.style.transform=`translateX(${-this._distance-this._moveX/2}px)`},onTouchEnd:function(t){let e=this.active;if(this.nodes.overflow.style.transition=s.transition,this._moveX>this._slideWidth/3)e++;else{if(!(this._moveX<-this._slideWidth/3))return void(this.nodes.overflow.style.transform=`translateX(${-this._distance}px)`);e--}this.changeActive(e)}};function u(){let e=this.settings.responsive.slice().reverse().find((t=>window.matchMedia(`(min-width: ${t.minWidth})`).matches));return e?t(t({},this.settings.default),e):this.settings.default}let v,g=!1;function f(){g||(g=!0,v=setTimeout((()=>{this.config=u.call(this),this.config.disable?this.disable():this.refresh(),g=!1,clearTimeout(v)}),500))}const y={default:{loop:!0,group:1,spaceAround:0,noStartSpace:!1,autoplay:0}};class m{constructor(t,e){this.el=t;const n=i.returnJson(this.el.getAttribute(s.attr));this.settings=i.extend(!0,y,e,n),this.clonedChildren=this.el.innerHTML,this.onClick=d.bind(this),this.onTouchstart=p.onTouchStart.bind(this),this.onTouchMove=p.onTouchMove.bind(this),this.onTouchEnd=p.onTouchEnd.bind(this),this.nodes={paging:this.el.querySelector(`[${s.attrPaging}]`),prev:this.el.querySelector(`[${s.attrPrev}]`),next:this.el.querySelector(`[${s.attrNext}]`),playstop:this.el.querySelector(`[${s.attrPlaystop}]`)},this.pagingBtnString=this.nodes.paging.children[0].outerHTML,this.playstopString=this.nodes.playstop.children[0].outerHTML,this.prevString=this.nodes.prev.children[0].outerHTML,this.nextString=this.nodes.next.children[0].outerHTML;const o=this.nodes.playstop.getAttribute(s.attrPlaystop).split("|"),a=this.nodes.prev.getAttribute(s.attrPrev).split("|"),r=this.nodes.next.getAttribute(s.attrNext).split("|");this.texts={stop:o[0],play:o[1],prev:a[0],prevFirst:a[1],next:r[0],nextLast:r[1]},this.config=this.settings.default,this.settings.responsive&&(this.settings.responsive.sort(((t,e)=>parseInt(t.minWidth,10)-parseInt(e.minWidth,10))),this.config=u.call(this),this.settings.responsive.forEach((t=>{window.matchMedia(`(min-width: ${t.minWidth})`).addEventListener("change",f.bind(this))}))),this.config.disable||h.call(this)}refresh(){h.call(this)}play(){if("stop"===this.autoplayStatus)return;this.pause(),this.autoplayStatus="play",this.nodes.playstop.classList.add("is-playing");const t=this.playstopString;this.nodes.playstop.innerHTML=t.replace("{text}",this.texts.play);let e=this.active;this._interval=window.setInterval((()=>{e++,e>this.slideLength-1&&(e=0),this.changeActive(e)}),this.config.autoplay)}pause(){window.clearInterval(this._interval)}stop(){this.autoplayStatus="stop",this.nodes.playstop.classList.remove("is-playing");const t=this.playstopString;this.nodes.playstop.innerHTML=t.replace("{text}",this.texts.stop),window.clearInterval(this._interval)}toggleAutoplay(){"play"===this.autoplayStatus?this.stop():"stop"===this.autoplayStatus&&(this.autoplayStatus="play",this.play())}changeActive(t){this.active=t,this.active<0&&(this.active=this.config.loop?this.slideLength-1:0),this.active>this.slideLength-1&&(this.active=this.config.loop?0:this.slideLength-1),c.call(this)}disable(){this.stop(),this.nodes.wrapper.removeEventListener("touchstart",this.onTouchStart),this.nodes.wrapper.removeEventListener("touchmove",this.onTouchMove),this.nodes.wrapper.removeEventListener("touchend",this.onTouchEnd),this.el.removeEventListener("click",this.onClick),this.el.removeEventListener("mouseenter",this.pause),this.el.removeEventListener("mouseleave",this.play),this.nodes.paging.hidden=!0,this.nodes.prev.hidden=!0,this.nodes.next.hidden=!0,this.nodes.playstop.hidden=!0,this.nodes.overflow.removeAttribute("style"),this.el.classList.remove(s.activeClass)}}const S=(t,e)=>{!t.pmCarousel&&t.hasAttribute(s.attr)&&(t.pmCarousel=new m(t,e))};export default function(t={},e){null!==e&&((e=e||document.querySelectorAll(`[${s.attr}]`)).length?e.forEach((e=>S(e,t))):S(e,t))}
